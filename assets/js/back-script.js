(()=>{"use strict";var e;const t={mediaUploader:e};var a,l,d,o,u,n,r;function s(e){const t=e.target.dataset.leagueId,a=document.querySelector(`.league-item-id-${t} .league-name`),l=a?.textContent,d=document.querySelector(`.league-item-id-${t} .teamtally-delete`),o=d?.dataset.removeUrl;confirm(`Would you really want to delete the league "${l}" ?`)&&o&&(window.location.href=o)}t.openMediaUploader=t=>{e||(e=wp.media({title:"Select Image",button:{text:"Use this image"},multiple:!1})).on("select",(()=>{t(e)})),e.open()},t.executeIfSelectorExists=(e,t)=>{document.querySelector(e)&&t()},t.executeIfSelectorExists("body.team-tally_page_teamtally_leagues_add",(()=>{document.addEventListener("DOMContentLoaded",(()=>{a=document.querySelector(".teamtally_leagues__add-league #photo-upload"),l=document.querySelector(".teamtally_leagues__add-league #photo-remove"),o=document.querySelector("form#add-league input[name=league-photo]"),n=document.querySelector("form#add-league input[name=former-league-photo]"),r=document.querySelector("form#add-league input[name=former-league-photo-url]"),u=document.querySelector(".teamtally_leagues__add-league__photo"),d=document.querySelector(".teamtally_leagues__add-league .submit .spinner"),a.addEventListener("click",(()=>{t.openMediaUploader((e=>{var t=e.state().get("selection").first().toJSON();o.value=t.id,u.style.backgroundImage=`url(${t.url})`,u.classList.remove("invalid"),a.classList.add("hidden"),l.classList.remove("hidden")}))})),l.addEventListener("click",(()=>(o.value="",u.style.backgroundImage="none",a.classList.remove("hidden"),l.classList.add("hidden"),u.classList.remove("invalid"),void(n&&(o.value=n.value,u.style.backgroundImage=`url(${r.value})`)))));const e=document.querySelector(".teamtally_leagues__add-league form");e.reset(),o.value=n.value,e.addEventListener("submit",(e=>{if(!+o.value)return u.classList.add("invalid"),void e.preventDefault();d.classList.add("is-active")}))}))})),t.executeIfSelectorExists("body.team-tally_page_teamtally_leagues_view",(()=>{document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll(".teamtally_leagues__league-item .teamtally-delete").forEach((e=>{e.addEventListener("click",s)}));const e=document.querySelector(".teamtally_leagues__league-item_new");e.addEventListener("click",(()=>{const t=e.dataset.newLeagueUrl;window.location.href=t}))}))})),window.TEAMTALLY={leagues:{}}})();